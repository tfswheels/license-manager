# shopify.app.toml
name = "DigiKey HQ"
client_id = "5106276d12b769bee15b1016359e487c"
application_url = "https://digikeyhq.com"
embedded = true

[access_scopes]
# Core scopes that were in the original installation
scopes = "read_products,read_customers,write_orders"

# New scope being added after initial installation - must be optional
# This allows existing installations to dynamically request this scope
optional_scopes = ["read_orders"]

[auth]
redirect_urls = [
  "https://api.digikeyhq.com/auth/callback"
]

[webhooks]
api_version = "2025-10"

# GDPR compliance webhooks - MUST use full HTTPS URLs
[[webhooks.subscriptions]]
compliance_topics = ["customers/data_request"]
uri = "https://api.digikeyhq.com/webhooks/gdpr/customers/data_request"

[[webhooks.subscriptions]]
compliance_topics = ["customers/redact"]
uri = "https://api.digikeyhq.com/webhooks/gdpr/customers/redact"

[[webhooks.subscriptions]]
compliance_topics = ["shop/redact"]
uri = "https://api.digikeyhq.com/webhooks/gdpr/shop/redact"

# Order webhooks
[[webhooks.subscriptions]]
topics = ["orders/create"]
uri = "https://api.digikeyhq.com/webhooks/orders/create"

[pos]
embedded = false